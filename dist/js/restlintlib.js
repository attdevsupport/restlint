"use strict";var pData={general:{},parameters:[],paths:[],statuses:[],errors:[]},errors={general:[],parameters:[],paths:[],statuses:[],exceptions:[]},jsdata="",naming="lowerCamel",getProps=function(o,n){var h=[];return Object.keys(n).forEach(function(e,r){var a="object",t=[];if(o&&t.push(o),t.push(e),n[e].type&&(a=n[e].type),n[e].hasOwnProperty("items"))if(n[e].items.hasOwnProperty("$ref")){var s=n[e].items.$ref;getProps(t.join("."),jsdata.schemas[s].properties).forEach(function(e,r){t.push(e),h.push(e)})}else n[e].items.hasOwnProperty("type")&&h.push(t.join(".")+","+n[e].items.type);else if(n[e].hasOwnProperty("$ref")){s=n[e].$ref;getProps(t.join("."),jsdata.schemas[s].properties).forEach(function(e,r){t.push(e),h.push(e)})}else n[e].hasOwnProperty("type")?h.push(t.join(".")+","+n[e].type):h.push(t.join(".")+","+a)}),h},getCsvFileType=function(e){var r=2+(e.lastIndexOf("-")-1>>>0),a=1+(e.lastIndexOf(".")-1>>>0);return e.slice(r,a)},createErrorObj=function(e,r,a){var t={};return t.name=e,t.msg=a,t.level=r,t},createStatusObj=function(e,r,a){var t={};return t.path=e,t.method=r,t.statuses=a,t},checkBasePath=function(){var e=[],r="";e.push(pData.general.basePath),checkPathStructure("basePath",e),(pData.general.basePath.match(/v[0-9]/g)||[]).length||(r="basePath should have version string (v[0-9], e.g. v1)",errors.paths.push(createErrorObj(pData.general.basePath,"error",r)))},checkResources=function(e){e.forEach(function(e,r){var a=e.replace(/^[/]+|[/]$/,"").split("/"),t=a[a.length-1],s="";t.match(/create|make|delete|update|get|del|remove/i)&&(s="resource must be a noun",errors.paths.push(createErrorObj(e,"error",s))),"lowerCamel"===naming?/^[A-Z_-]+|[_-]+/.test(t)&&(s="resource must be lowerCamel case",errors.paths.push(createErrorObj(e,"error",s))):"UpperCamel"===naming?t.match(/^[a-z_-]+|[_-]+/)&&(s="resource must be UpperCamel case",errors.paths.push(createErrorObj(e,"error",s))):"snake"===naming&&0==t.match(/[_]/)&&(s="resource must be in snake_case",errors.paths.push(createErrorObj(e,"warning",s)))})},checkPathStructure=function(s,e){e.forEach(function(e,r){var a="",t=e.replace(/\//g,"");e.match(/\/\//)&&(a=s+" can not have double forward slash",errors.paths.push(createErrorObj(e,"error",a))),t!=encodeURIComponent(t)&&(a=s+" can not have reserved characters",errors.paths.push(createErrorObj(e,"error",a))),(e.match(/\//g)||[]).length||(a=s+" should have at least one forward slash",errors.paths.push(createErrorObj(e,"warning",a))),"/"!=e[0]&&(a=s+" should have leading forward slash",errors.paths.push(createErrorObj(e,"error",a))),"/"===e[e.length-1]&&(a=s+" should not have forward slash at end of path",errors.paths.push(createErrorObj(e,"warning",a)))})},checkStatusCodes=function(o){o.forEach(function(e,r){if(o[r].method.match(/post/i)&&o[r].statuses.indexOf("201")<0){var a="POST for creating resources should return HTTP status code of 201";a+=" (only show: "+o[r].statuses.join(",")+")";var t=o[r].method.toUpperCase()+" "+o[r].path,s=createErrorObj(t,"warning",a);errors.statuses.push(s)}o[r].statuses.forEach(function(e){console.log(e)})})},getErrors=function(e){return errors[e]},getData=function(e){return pData[e]},clearData=function(){pData={general:{},parameters:[],paths:[],statuses:[],errors:[]},errors={general:[],parameters:[],paths:[],statuses:[],exceptions:[]},jsdata=""},loadCsv=function(e,r){var a=r.split("\n"),t=a[0].split(",");a.splice(1).forEach(function(e){e.split(",").forEach(function(e,r){console.log(t[r]+" = "+e)})})},loadJson=function(e){var s=JSON.parse(e);pData.general.basePath=s.basePath,pData.general.host=s.host,Object.keys(s.paths).forEach(function(t,e){pData.paths[e]=t,Object.keys(s.paths[t]).forEach(function(e,r){var a=[];Object.keys(s.paths[t][e].responses).forEach(function(e,r){a.push(e)}),pData.statuses.push(createStatusObj(t,e,a))}),getProps("",pData.paths[e]).forEach(function(e,r){})})};